/*


   Magic 360 Plus v1.0 ${luckyteam.licenses.commercial-plus.text}
   Copyright 2010 Magic Toolbox
   www.magictoolbox.com/magic360plus/


*/
/*
eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('(w(){q(G.63){u}B a={1N:"2.3.11",4N:0,31:{},$4y:w(b){u(b.$1T||(b.$1T=++$J.4N))},3x:w(b){u($J.31[b]||($J.31[b]={}))},$F:w(){},$K:w(){u K},1k:w(b){u(1n!=b)},77:w(b){u!!(b)},22:w(b){q(!$J.1k(b)){u K}q(b.$1v){u b.$1v}q(!!b.2a){q(1==b.2a){u"3K"}q(3==b.2a){u"5W"}}q(b.Q&&b.3X){u"6W"}q(b.Q&&b.3u){u"U"}q((b 1z G.2N||b 1z G.4m)&&b.2i===$J.2f){u"3B"}q(b 1z G.1w){u"2h"}q(b 1z G.4m){u"w"}q(b 1z G.6c){u"4t"}q($J.v.2H){q($J.1k(b.51)){u"1W"}}O{q(b 1z G.3W||b===G.1W||b.2i==G.6Z){u"1W"}}q(b 1z G.6m){u"5m"}q(b 1z G.5Y){u"71"}q(b===G){u"G"}q(b===E){u"E"}u 3f(b)},1e:w(f,e){q(!(f 1z G.1w)){f=[f]}H(B d=0,b=f.Q;d<b;d++){q(!$J.1k(f)){2v}H(B c P(e||{})){f[d][c]=e[c]}}u f[0]},3t:w(f,e){q(!(f 1z G.1w)){f=[f]}H(B d=0,b=f.Q;d<b;d++){q(!$J.1k(f[d])){2v}q(!f[d].1b){2v}H(B c P(e||{})){q(!f[d].1b[c]){f[d].1b[c]=e[c]}}}u f[0]},5X:w(d,c){q(!$J.1k(d)){u d}H(B b P(c||{})){q(!d[b]){d[b]=c[b]}}u d},$1j:w(){H(B c=0,b=U.Q;c<b;c++){1j{u U[c]()}1s(d){}}u R},$A:w(d){q(!$J.1k(d)){u $j([])}q(d.5f){u $j(d.5f())}q(d.3X){B c=d.Q||0,b=S 1w(c);2w(c--){b[c]=d[c]}u $j(b)}u $j(1w.1b.7x.1A(d))},56:w(){u S 6m().7v()},2g:w(f){B d;2O($J.22(f)){C"3n":d={};H(B e P f){d[e]=$J.2g(f[e])}Y;C"2h":d=[];H(B c=0,b=f.Q;c<b;c++){d[c]=$J.2g(f[c])}Y;3E:u f}u d},$:w(c){q(!$J.1k(c)){u R}q(c.$4w){u c}2O($J.22(c)){C"2h":c=$J.5X(c,$J.1e($J.1w,{$4w:N}));c.2n=c.5y;u c;Y;C"4t":B b=E.3e(c);q($J.1k(b)){u $J.$(b)}u R;Y;C"G":C"E":$J.$4y(c);c=$J.1e(c,$J.2q);Y;C"3K":$J.$4y(c);c=$J.1e(c,$J.1h);Y;C"1W":c=$J.1e(c,$J.3W);Y;C"5W":u c;Y;C"w":C"2h":C"5m":3E:Y}u $J.1e(c,{$4w:N})},$S:w(b,d,c){u $j($J.5c.2D(b)).6t(d).1r(c)}};G.63=G.$J=a;G.$j=a.$;$J.1w={$1v:"2h",T:w(e,f){B b=8.Q;H(B c=8.Q,d=(f<0)?20.3N(0,c+f):f||0;d<c;d++){q(8[d]===e){u d}}u-1},2B:w(b,c){u 8.T(b,c)!=-1},5y:w(b,e){H(B d=0,c=8.Q;d<c;d++){q(d P 8){b.1A(e,8[d],d,8)}}},1H:w(b,g){B f=[];H(B e=0,c=8.Q;e<c;e++){q(e P 8){B d=8[e];q(b.1A(g,8[e],e,8)){f.6L(d)}}}u f},75:w(b,f){B e=[];H(B d=0,c=8.Q;d<c;d++){q(d P 8){e[d]=b.1A(f,8[d],d,8)}}u e}};$J.3t(6c,{$1v:"4t",3T:w(){u 8.1t(/^\\s+|\\s+$/g,"")},6x:w(){u 8.1t(/^\\s+/g,"")},6I:w(){u 8.1t(/\\s+$/g,"")},6E:w(b){u(8.2y()===b.2y())},7g:w(b){u(8.13().2y()===b.13().2y())},k:w(){u 8.1t(/-\\D/g,w(b){u b.6g(1).6B()})},5n:w(){u 8.1t(/[A-Z]/g,w(b){u("-"+b.6g(0).13())})},3l:w(c){u 29(8,c||10)},6u:w(){u 2t(8)},78:w(){u!8.1t(/N/i,"").3T()},3Z:w(c,b){b=b||"";u(b+8+b).T(b+c+b)>-1}});a.3t(4m,{$1v:"w",45:w(){B c=$J.$A(U),b=8,d=c.2X();u w(){u b.27(d||R,c.6k($J.$A(U)))}},28:w(){B c=$J.$A(U),b=8,d=c.2X();u w(e){u b.27(d||R,$j([e||G.1W]).6k(c))}},1X:w(){B c=$J.$A(U),b=8,d=c.2X();u G.5R(w(){u b.27(b,c)},d||0)},5i:w(){B c=$J.$A(U),b=8;u w(){u b.1X.27(b,c)}},6X:w(){B c=$J.$A(U),b=8,d=c.2X();u G.72(w(){u b.27(b,c)},d||0)}});$J.v={3r:{5P:!!(E.73),6V:!!(G.6T),4F:!!(E.6S)},1l:(G.3U)?"4z":!!(G.2s)?"2H":(!X.6R)?"1D":(1n!=E.6U||R!=G.6Q)?"2u":"6K",1N:"",5w:($J.1k(G.6M))?"6N":(X.5w.6O(/74|3k|76/i)||["6J"])[0].13(),6Y:E.35&&"5U"==E.35.13(),1x:w(){u(E.35&&"5U"==E.35.13())?E.2Q:E.4o},1K:K,2W:w(){q($J.v.1K){u}$J.v.1K=N;$J.2Q=$j(E.2Q);$j(E).4G("23")}};(w(){w b(){u!!(U.3u.4l)}$J.v.1N=("4z"==$J.v.1l)?!!(G.6H)?6v:!!(G.5O)?6w:($J.v.3r.4F)?6G:((b())?6y:((E.2S)?6z:6r)):("2H"==$J.v.1l)?!!(G.5Q&&G.6A)?6:((G.5Q)?5:4):("1D"==$J.v.1l)?(($J.v.3r.5P)?(($J.v.3r.4F)?6C:4S):8f):("2u"==$J.v.1l)?!!E.37?7T:!!(G.5O)?7S:((E.2S)?7R:7L):"";$J.v[$J.v.1l]=$J.v[$J.v.1l+$J.v.1N]=N;q(G.5S){$J.v.5S=N}})();$J.1h={3Y:w(b){u 8.1Q.3Z(b," ")},5r:w(b){q(b&&!8.3Y(b)){8.1Q+=(8.1Q?" ":"")+b}u 8},5u:w(b){b=b||".*";8.1Q=8.1Q.1t(S 5Y("(^|\\\\s)"+b+"(?:\\\\s|$)"),"$1").3T();u 8},79:w(b){u 8.3Y(b)?8.5u(b):8.5r(b)},2p:w(c){c=(c=="5C"&&8.2U)?"3H":c.k();B b=R;q(8.2U){b=8.2U[c]}O{q(E.3V&&E.3V.5q){3S=E.3V.5q(8,R);b=3S?3S.8d([c.5n()]):R}}q(!b){b=8.19[c]}q("1Y"==c){u $J.1k(b)?2t(b):1}q(/^(1p(5o|5p|5v|5E)88)|((2P|4E)(5o|5p|5v|5E))$/.2M(c)){b=29(b)?b:"2T"}u("4a"==b?R:b)},62:w(c,b){1j{q("1Y"==c){8.g(b);u 8}q("5C"==c){8.19[("1n"===3f(8.19.3H))?"7l":"3H"]=b;u 8}8.19[c.k()]=b+(("7k"==$J.22(b)&&!$j(["7j","6l"]).2B(c.k()))?"25":"")}1s(d){}u 8},1r:w(c){H(B b P c){8.62(b,c[b])}u 8},7m:w(){B b={};$J.$A(U).2n(w(c){b[c]=8.2p(c)},8);u b},g:w(e,c){c=c||K;e=2t(e);q(c){q(e==0){q("2Z"!=8.19.2G){8.19.2G="2Z"}}O{q("47"!=8.19.2G){8.19.2G="47"}}}q($J.v.2H){q(!8.2U||!8.2U.7n){8.19.6l=1}1j{B d=8.7p.3X("5l.44.6b");d.69=(1!=e);d.1Y=e*1J}1s(b){8.19.1H+=(1==e)?"":"7a:5l.44.6b(69=N,1Y="+e*1J+")"}}8.19.1Y=e;u 8},6t:w(b){H(B c P b){8.7F(c,""+b[c])}u 8},7w:w(){u 8.1r({2C:"4Q",2G:"2Z"})},7y:w(){u 8.1r({2C:"2L",2G:"47"})},3v:w(){u{I:8.7s,L:8.7t}},3J:w(){u{14:8.34,1d:8.38}},7u:w(){B b=8,c={14:0,1d:0};4V{c.1d+=b.38||0;c.14+=b.34||0;b=b.1C}2w(b);u c},4Y:w(){q($J.1k(E.4o.4W)){B c=8.4W(),e=$j(E).3J(),g=$J.v.1x();u{14:c.14+e.y-g.7z,1d:c.1d+e.x-g.7A}}B f=8,d=t=0;4V{d+=f.7G||0;t+=f.7E||0;f=f.7D}2w(f&&!(/^(?:2Q|5G)$/i).2M(f.1E));u{14:t,1d:d}},7B:w(){B c=8.4Y();B b=8.3v();u{14:c.14,2o:c.14+b.L,1d:c.1d,2R:c.1d+b.I}},7C:w(d){1j{8.7r=d}1s(b){8.7q=d}u 8},4e:w(){u(8.1C)?8.1C.4g(8):8},4i:w(){$J.$A(8.7f).2n(w(b){q(3==b.2a){u}$j(b).4i()});8.4e();8.4O();q(8.$1T){$J.31[8.$1T]=R;1S $J.31[8.$1T]}u R},3R:w(d,c){c=c||"2o";B b=8.1F;("14"==c&&b)?8.7e(d,b):8.2K(d);u 8},4v:w(d,c){B b=$j(d).3R(8,c);u 8},7d:w(b){8.3R(b.1C.4p(8,b));u 8},7b:w(b){q(!(b=$j(b))){u K}u(8==b)?K:(8.2B&&!($J.v.5h))?(8.2B(b)):(8.4L)?!!(8.4L(b)&16):$J.$A(8.58(b.1E)).2B(b)}};$J.1h.7c=$J.1h.2p;$J.1h.7h=$J.1h.1r;q(!G.1h){G.1h=$J.$F;q($J.v.1l.1D){G.E.2D("7i")}G.1h.1b=($J.v.1l.1D)?G["[[7o.1b]]"]:{}}$J.3t(G.1h,{$1v:"3K"});$J.2q={3v:w(){q($J.v.7H||$J.v.5h){u{I:12.7I,L:12.85}}u{I:$J.v.1x().86,L:$J.v.1x().84}},3J:w(){u{x:12.83||$J.v.1x().38,y:12.80||$J.v.1x().34}},81:w(){B b=8.3v();u{I:20.3N($J.v.1x().82,b.I),L:20.3N($J.v.1x().87,b.L)}}};$J.1e(E,{$1v:"E"});$J.1e(G,{$1v:"G"});$J.1e([$J.1h,$J.2q],{2m:w(e,c){B b=$J.3x(8.$1T),d=b[e];q(1n!=c&&1n==d){d=b[e]=c}u($J.1k(d)?d:R)},57:w(d,c){B b=$J.3x(8.$1T);b[d]=c;u 8},4f:w(c){B b=$J.3x(8.$1T);1S b[c];u 8}});q(!(G.40&&G.40.1b&&G.40.1b.2S)){$J.1e([$J.1h,$J.2q],{2S:w(b){u $J.$A(8.2A("*")).1H(w(d){1j{u(1==d.2a&&d.1Q.3Z(b," "))}1s(c){}})}})}$J.1e([$J.1h,$J.2q],{8e:w(){u 8.2S(U[0])},58:w(){u 8.2A(U[0])}});$J.3W={$1v:"1W",1o:w(){q(8.59){8.59()}O{8.51=N}q(8.52){8.52()}O{8.8c=K}u 8},8b:w(){u{x:8.89||8.8a+$J.v.1x().38,y:8.7Y||8.7O+$J.v.1x().34}},7P:w(){B b=8.7N||8.7M;2w(b&&3==b.2a){b=b.1C}u b},7J:w(){B c=R;2O(8.3Q){C"61":c=8.4H||8.7K;Y;C"5L":c=8.4H||8.7Q;Y;3E:u c}1j{2w(c&&3==c.2a){c=c.1C}}1s(b){c=R}u c},7W:w(){q(!8.4T&&8.3g!==1n){u(8.3g&1?1:(8.3g&2?3:(8.3g&4?2:0)))}u 8.4T}};$J.4j="4I";$J.4r="7X";$J.3D="";q(!E.4I){$J.4j="7V";$J.4r="7U";$J.3D="32"}$J.1e([$J.1h,$J.2q],{a:w(e,d){B g=("23"==e)?K:N,c=8.2m("2J",{});c[e]=c[e]||[];q(c[e].1L(d.$2Y)){u 8}q(!d.$2Y){d.$2Y=20.6P(20.6F()*$J.56())}B b=8,f=w(h){u d.1A(b)};q("23"==e){q($J.v.1K){d.1A(8);u 8}}q(g){f=w(h){h=$J.1e(h||G.e,{$1v:"1W"});u d.1A(b,$j(h))};8[$J.4j]($J.3D+e,f,K)}c[e][d.$2Y]=f;u 8},3z:w(e){B g=("23"==e)?K:N,c=8.2m("2J");q(!c||!c[e]){u 8}B f=c[e],d=U[1]||R;q(e&&!d){H(B b P f){q(!f.1L(b)){2v}8.3z(e,b)}u 8}d=("w"==$J.22(d))?d.$2Y:d;q(!f.1L(d)){u 8}q("23"==e){g=K}q(g){8[$J.4r]($J.3D+e,f[d],K)}1S f[d];u 8},4G:w(f,c){B j=("23"==f)?K:N,i=8,h;q(!j){B d=8.2m("2J");q(!d||!d[f]){u 8}B g=d[f];H(B b P g){q(!g.1L(b)){2v}g[b].1A(8)}u 8}q(i===E&&E.3i&&!2k.4P){i=E.4o}q(E.3i){h=E.3i(f);h.6D(c,N,N)}O{h=E.7Z();h.8M=f}q(E.3i){i.4P(h)}O{i.ar("32"+c,h)}u h},4O:w(){B b=8.2m("2J");q(!b){u 8}H(B c P b){8.3z(c)}8.4f("2J");u 8}});(w(){q($J.v.1D&&$J.v.1N<4S){(w(){($j(["ap","4C"]).2B(E.37))?$J.v.2W():U.3u.1X(50)})()}O{q($J.v.2H&&G==14){(w(){($J.$1j(w(){$J.v.1x().9D("1d");u N}))?$J.v.2W():U.3u.1X(50)})()}O{$j(E).a("9C",$J.v.2W);$j(G).a("4c",$J.v.2W)}}})();$J.2f=w(){B f=R,c=$J.$A(U);q("3B"==$J.22(c[0])){f=c.2X()}B b=w(){H(B i P 8){8[i]=$J.2g(8[i])}q(8.2i.$1M){8.$1M={};B l=8.2i.$1M;H(B j P l){B h=l[j];2O($J.22(h)){C"w":8.$1M[j]=$J.2f.4Z(8,h);Y;C"3n":8.$1M[j]=$J.2g(h);Y;C"2h":8.$1M[j]=$J.2g(h);Y}}}B g=(8.2c)?8.2c.27(8,U):8;1S 8.4l;u g};q(!b.1b.2c){b.1b.2c=$J.$F}q(f){B e=w(){};e.1b=f.1b;b.1b=S e;b.$1M={};H(B d P f.1b){b.$1M[d]=f.1b[d]}}O{b.$1M=R}b.2i=$J.2f;b.1b.2i=b;$J.1e(b.1b,c[0]);$J.1e(b,{$1v:"3B"});u b};a.2f.4Z=w(b,c){u w(){B e=8.4l;B d=c.27(b,U);u d}};$J.3k=$j(G);$J.5c=$j(E)})();B 5F=S $J.2f({12:R,1K:K,1c:{2z:$J.$F,4k:$J.$F,36:$J.$F},I:0,L:0,1p:{1d:0,2R:0,14:0,2o:0},4E:{1d:0,2R:0,14:0,2o:0},2P:{1d:0,2R:0,14:0,2o:0},3m:{2z:w(a){q(a){$j(a).1o()}8.3F();q(8.1K){u}8.1K=N;8.5b();8.3A();8.1c.2z.1X(1)},4k:w(a){q(a){$j(a).1o()}8.3F();8.1K=K;8.3A();8.1c.4k.1X(1)},36:w(a){q(a){$j(a).1o()}8.3F();8.1K=K;8.3A();8.1c.36.1X(1)}},5d:w(){$j(["4c","5a","54"]).2n(w(a){8.12.a(a,8.3m["32"+a].28(8).5i(1))},8)},3F:w(){$j(["4c","5a","54"]).2n(w(a){8.12.3z(a)},8)},3A:w(){q(8.12.2m("S")){B a=8.12.1C;8.12.4e().4f("S").1r({2F:"9B",14:"4a"});a.4i();8.12.I=8.I,8.12.L=8.L}},2c:w(c,b){8.1c=$J.1e(8.1c,b);B a=8.12=$j(c)||$J.$S("1q").4v($J.$S("1i").1r({2F:"3a",14:-9F,I:10,L:10,6j:"2Z"}).4v($J.2Q)).57("S",N),d=w(){q(8.55()){8.3m.2z.1A(8)}O{8.3m.36.1A(8)}d=R}.45(8);8.5d();q(!c.1O){a.1O=c}q(a&&a.4C){d.1X(1J)}},55:w(){B a=8.12;u(a.4B)?(a.4B>0):(a.37)?("4C"==a.37):a.I>0},5b:w(){8.I=8.12.4B||8.12.I;8.L=8.12.9G||8.12.L;$j(["1d","2R","14","2o"]).2n(w(a){8.4E[a]=8.12.2p("2P-"+a).3l();8.2P[a]=8.12.2p("2P-"+a).3l();8.1p[a]=8.12.2p("1p-"+a+"-I").3l()},8)}});w 53(b,a){q(b.T("?")!=-1){u b.1t(/\\?/,a+"?")}O{u b+a}}w 3L(h,g,a){B e=(X.3j.T("5M")!=-1)?N:K;B c=(X.3j.13().T("3k")!=-1)?N:K;B b=(X.1I.T("5N")!=-1)?N:K;B f="";q(e&&c&&!b){f+="<3n ";H(B d P h){f+=d+\'="\'+h[d]+\'" \'}f+=">";H(B d P g){f+=\'<9I 2l="\'+d+\'" 1B="\'+g[d]+\'" /> \'}f+="</3n>"}O{f+="<4K ";H(B d P a){f+=d+\'="\'+a[d]+\'" \'}f+="> </4K>"}u f}w 64(){B a=41(U,".9H","1f","4R:9U-9V-a8-a4-4M","9P/x-6n-6q");u 3L(a.2j,a.M,a.1V)}w a1(){B a=41(U,".a2","1O","4R:a3-a0-9Z-9W-4M",R);u 3L(a.2j,a.M,a.1V)}w 41(b,e,g,d,h){B a=S 2N();a.1V=S 2N();a.M=S 2N();a.2j=S 2N();H(B c=0;c<b.Q;c=c+2){B f=b[c].13();2O(f){C"5e":Y;C"5x":a.1V[b[c]]=b[c+1];Y;C"1O":C"1f":b[c+1]=53(b[c+1],e);a.1V.1O=b[c+1];a.M[g]=b[c+1];Y;C"9X":C"9Y":C"a5":C"ab":C"ac":C"ad":C"aa":C"a9":C"a6":C"a7":C"9J":C"9E":C"9K":C"9L":C"9R":C"9S":C"9T":C"9Q":C"af":C"9M":C"9N":C"9O":C"ae":C"2z":C"ak":C"aG":C"aH":C"aI":C"aF":C"aE":C"aA":C"aB":C"aC":C"aK":C"aD":C"aJ":C"aL":C"3Q":C"67":C"1m":a.2j[b[c]]=b[c+1];Y;C"I":C"L":C"ay":C"al":C"am":C"3B":C"an":C"8g":C"2l":C"az":a.1V[b[c]]=a.2j[b[c]]=b[c+1];Y;3E:a.1V[b[c]]=a.M[b[c]]=b[c+1]}}a.2j.5e=d;q(h){a.1V.3Q=h}u a}B 2E="3G";B W=X.1I.13();q(W.T("3U")!=-1){2E="3U"}O{q(W.T("3G")!=-1){2E="3G"}O{q(W.T("4J")!=-1){2E="4J"}O{q(W.T("aj")!=-1){2E="2u"}}}}B 1R=S 1w();B 1g={1c:{},3P:{ag:"ah",ai:"K","4U-32-4n":"N",ao:10,6p:10,av:10,V:"aw","V-1u":"66%","V-1u-x":"66%","V-1u-y":"66%","V-ax":"au","V-1H":"43","V-at":30,"V-aq":"","1p-17":"#3M","1p-I":0,"V-1p-17":"#3M","V-1p-I":1,"1U-17":"#3M","1U-L":10,"1U-3h":1,"1U-3h-17":"#as","4U-9z-8H":"K",2I:"*",8I:"8J",2V:"#8G",46:($J.v.1l=="1D")?"G":"8F"},4s:w(){B d="";B a=E.2A("8C");H(B b=0;b<a.Q;b++){q(a[b].1O&&(/1g.8D/i.2M(a[b].1O))){B c=a[b].1O;8E=(c.T("4X")!=-1)?"4X":"";c=c.8K(0,c.8L("/"));d=c+"/";q(d=="/"){d=""}Y}}u d},2c:w(b){8.M=b;B j=E.39+"";j=(j.T("4b")!=-1)?"4b":"33";8.5j=8.4s();B g=S 1w();H(B c P 8.3P){g[c]=8.3P[c]}B f=S 1w();H(B c P 8.1c){f[c]=8.1c[c]}H(B c P f){q(g.1L(c)){g[c]=f[c];q(c=="V-1u"){g["V-1u-x"]=g["V-1u-y"]=g["V-1u"]}}}H(B c P f[8.M.1m]){q(g.1L(c)){g[c]=f[8.M.1m][c];q(c=="V-1u"){g["V-1u-x"]=g["V-1u-y"]=g["V-1u"]}}}H(B c P g){q(g.1L(c)){B h=g[c].2y();q(h.13()=="N"||g[c]===N){g[c]=1}q(h.13()=="4Q"||h.13()=="K"||g[c]===K){g[c]=0}}}B a="1g";8.48=8.5j+a.13();g["1p-17"]=8.17(g["1p-17"]);g["1U-17"]=8.17(g["1U-17"]);g["1U-3h-17"]=8.17(g["1U-3h-17"]);q(g.2V.T("#")==0){g.2V=8.17(g.2V)}g["V-1p-17"]=8.17(g["V-1p-17"]);q(g["V-1H"].13()=="6s"){g["V-1H"]="6s,4,60,#65,0.3,6,6,2,3,K"}O{q(g["V-1H"].13()=="43"){g["V-1H"]="43,#65,0.5,5,5,2,1J,K"}}q(8.M.2d==R){8.M.2d=""}q(8.M.24==R){8.M.24=""}q(8.M.2d!=""){B d=8.M.2d.1G(g.2I);H(B c=0;c<d.Q;c++){d[c]=8.3O(d[c],E.39.6e)}8.M.2d=d.3d(g.2I)}q(8.M.24!=""){B d=8.M.24.1G(g.2I);H(B c=0;c<d.Q;c++){d[c]=8.3O(d[c],E.39.6e)}8.M.24=d.3d(g.2I)}B e="8R="+8.2x(8.M.2d)+"&8S="+8.2x(8.M.24)+"&8T="+8.2x(8.M.I)+"&8Q="+8.2x(8.M.L);H(B c P g){q(g.1L(c)){e+="&8P"+c.1t(/-/g,"9A")+"="+8.2x(g[c])}}e+="&8N="+8.M.5A;u 64("67",j+"://8O.8B.5D/8A/6n/8n/6q/8o.8p#1N=9,0,0,0","8m",e,"I",8.M.I,"L",8.M.L,"2l",8.M.2l,"1m",8.M.2l,"1O",8.48,"8l","8h","5x","33://8i.8j.5D/8k/8q","1f",8.48,"8r","5K","8x",".","46",g.46,"8y","8z","8w","N","8v","8s","8t","N")},2x:w(a){u 8u(a)},5g:w(){H(B b P 1R){q(1R.1L(b)){B c=b.2y();B a=1g.5Z(c.1t("6a","3w"));q(a&&a.5s){a.5s()}}}},4q:w(b,a){q(b.19){b.19.1Y=2t(a/1J);b.19["-8U-1Y"]=2t(a/1J);b.19["-5G-1Y"]=2t(a/1J);b.19.1H="8V(9m="+a+")"}},5Z:w(a){q(G.E[a]){u G.E[a]}q(X.9n.T("44 9o")==-1){q(E.42&&E.42[a]){u E.42[a]}}O{u E.3e(a)}},4h:w(b,a){1Z=E.3e(b);q(1Z==1n){u}a-=5;8.4q(1Z,a);q(a<=0){1Z.1C.4g(1Z)}O{5R(w(){1g.4h(b,a)},1)}},17:w(a){a=a.1t("#","");q(a.Q==3){a=a+a}u"9l"+a},1o:w(){H(B c P 1R){B b=E.3e(c);q(b){B a=b.1C;a.4p(1R[c],b)}}1R=S 1w()},3O:w(e,d){B a=e.1G("/");q(/33:|4b:|9k:/.2M(a[0])){u e}B b,c=d.1G("/");q(c.Q>3){c.5J()}q(a[0]===""){d=c[0]+"//"+c[2];c=d.1G("/");1S a[0]}H(b=0;b<a.Q;b++){q(a[b]===".."){q(3f a[b-1]!=="1n"){1S a[b-1]}O{q(c.Q>3){c.5J()}}1S a[b]}q(a[b]==="."){1S a[b]}}B f=[];H(b=0;b<a.Q;b++){q(3f a[b]!=="1n"){f[f.Q]=a[b]}}u c.3d("/")+"/"+f.3d("/")},5V:w(){B f=-1;B c=(X.3j.T("5M")!=-1)?N:K;B i=(X.3j.13().T("3k")!=-1)?N:K;B b=(X.1I.T("5N")!=-1)?N:K;q(X.2r!=R&&X.2r.Q>0){q(X.2r["3p 3q 2.0"]||X.2r["3p 3q"]){B m=X.2r["3p 3q 2.0"]?" 2.0":"";B n=X.2r["3p 3q"+m].9h;B d=n.1G(" ");B g=d[2].1G(".");B a=g[0];B o=g[1];q(d[3]!=""){3b=d[3].1G("r")}O{3b=d[4].1G("r")}B h=3b[1]>0?3b[1]:0;B f=a}}O{q(X.1I.13().T("4D/2.6")!=-1){f=4}O{q(X.1I.13().T("4D/2.5")!=-1){f=3}O{q(X.1I.13().T("4D")!=-1){f=2}O{q(c&&i&&!b){B l;B j;B k;1j{j=S 2s("1y.1y.7");l=j.49("$1N");l=7}1s(k){}q(!l){1j{j=S 2s("1y.1y.6");l="4x 6,0,21,0";j.9i="5K";l=j.49("$1N");l=6}1s(k){}}q(!l){1j{j=S 2s("1y.1y.3");l=j.49("$1N");l=3}1s(k){}}q(!l){1j{j=S 2s("1y.1y.3");l="4x 3,0,18,0";l=3}1s(k){}}q(!l){1j{j=S 2s("1y.1y");l="4x 2,0,0,11";l=2}1s(k){l=-1}}u l}}}}}u f},3s:w(){B 1a=$J.$A(G.E.2A("*"));B 5H=8.5V();q(29(5H)<7){u}H(B i=0,l=1a.Q;i<l;i++){q(/1g/i.2M(1a[i].1Q.13())&&("1g"=="9j"&&1a[i].1E=="26"||"1g"=="1g")){2w(1a[i].1F){q(1a[i].1F.1E!="26"){1a[i].4g(1a[i].1F)}O{Y}}q(1a[i].1F&&1a[i].1F.1E!="26"||1a[i].1F==1n&&1a[i].1E!="26"){9p"9q 9w 9x 9y!"}q(8.1c["9v-4a-3s"]&&U.Q==0){$j(1a[i]).a("4n",w(e){$j(e).1o();8.3s(N);u K});2v}B 1Z=(1a[i].1E=="26")?1a[i]:1a[i].1F;B 1q=S 5F(1Z,{2z:w(15,2k,1c){B I=29(2k.I);B L=29(2k.L);q(I==0||L==0){I=29(2k.19.I);L=29(2k.19.L)}B 1i=E.2D("3y");1i.1Q="9u";B 2b=1R.Q;B M={I:I,L:L,2d:(15.1E=="A")?15.4d("5B"):"",24:((15.1E=="26")?15:15.1F).4d("5B")||((15.1E=="26")?15:15.1F).4d("9r"),2l:"3w"+2b,5A:"68"+2b,1m:15.1m};1i.1m="6a"+2b;$j(1i).1r({2F:"9s",6j:"2Z",2C:"9t-2L",I:I+"25",L:L+"25"});B 1q=E.2D("3y");$j(1q).1r({2F:"3a",2C:"2L",14:"2T",1d:"2T","z-6d":"6r"});1q.1Q="";1q.1m="68"+2b;1q.2K(15.9g(N));B 4u=(1c.1P==1n)?1g.4s()+"1P.9f":1c.1P;q(15.1m&&1c[15.1m]&&1c[15.1m]["1P"]!=1n){4u=1c[15.1m]["1P"]}B 1P=E.2D("3y");$j(1P).1r({2F:"3a",2C:"2L",14:"2T",1d:"2T",2V:"92("+4u+") 6h 6h 93-94",I:I+"25",L:L+"25"});1g.4q(1P,70);1q.2K(1P);$j(1q).a("4n",w(e){$j(e).1o();q(2E!="3G"){8.6p()}O{G.91()}u K}.28(1q));B 2e=E.2D("3y");$j(2e).1r({2C:"2L","z-6d":"1J",I:I+"25",L:L+"25",2F:"3a"});1i.2K(2e);q(E.39.90.T("33")==0){1i.2K(1q)}B p=15.1C;1R[1i.1m]=15;p.4p(1i,15);B 6f=\'<6i 1W="8W(3C,6o)" H="3w\'+2b+\'">4A(3C, 6o);</6i>\';8X(2e,1g.2c(M)+6f);8Y("G.3w"+2b+"8Z = w(3C,U){ 4A(3C,U) };");B 1D=X.1I.T("95/")>-1;B 2u=X.1I.T("96")>-1&&X.1I.T("9c")==-1;B 1f=2e.2A("9d")[0];q(1f==1n){1f=2e.2A("9e")[0]}q(2u||1D){$j(1i).a(((2u)?"9b":"9a"),w(e,m){B 1B=(e.3c)?-e.3c:e.5I;q(20.3I(1B)){q($J.v.1l=="1D"){1B=3*1B/20.3I(1B)}O{}q(m.3o){m.3o(1B)}}$j(e).1o()}.28(1i,1f))}q($J.v.1l=="4z"){1f.97=w(e){B 1B=(e.3c)?-e.3c:e.5I;q(20.3I(1B)){q(8.3o){8.3o(1B)}}$j(e).1o()}}$j(1f).a("5L",w(e,m){q(m&&m.5T){m.5T()}$j(e).1o()}.28(1i,1f));$j(1f).a("5z",w(e,m){q(m&&m.5t){m.5t("1f.5z")}q($J.v.1l!="1D"){$j(e).1o()}}.28(1i,1f));$j(1f).a("61",w(e,m){q(m&&m.5k){m.5k()}$j(e).1o()}.28(1i,1f))}.45(R,1a[i],1Z,8.1c)})}}}};w 4A(b,a){q("98"==b){1g.4h(a,1J)}}$j(E).a("23",w(){1g.3s()});$j(E).a("99",1g.5g);',62,668,'||||||||this||||||||||||||||||if||||return||function|||||var|case||document||window|for|width||false|height|params|true|else|in|length|null|new|indexOf|arguments|magnifier||navigator|break||||self|toLowerCase|top|ael||color||style|aels|prototype|options|left|extend|movie|Magic360Plus|Element|div|try|defined|engine|id|undefined|stop|border|img|j6|catch|replace|size|J_TYPE|Array|getDoc|ShockwaveFlash|instanceof|call|value|parentNode|webkit|tagName|firstChild|split|filter|userAgent|100|ready|hasOwnProperty|parent|version|src|loader|className|m360ATags|delete|J_UUID|progress|embedAttrs|event|j32|opacity|elm|Math||j1|domready|small_images|px|IMG|apply|j18|parseInt|nodeType|iid|init|big_images|divel|Class|detach|array|constructor|objAttrs|el|name|j40|j14|bottom|j5|Doc|plugins|ActiveXObject|parseFloat|gecko|continue|while|escapeParam|toString|onload|getElementsByTagName|contains|display|createElement|M360_ua|position|visibility|trident|delimiter|events|appendChild|block|test|Object|switch|padding|body|right|getElementsByClassName|0px|currentStyle|background|onready|shift|J_EUID|hidden||storage|on|http|scrollTop|compatMode|onerror|readyState|scrollLeft|location|absolute|tempArrayMinor|detail|join|getElementById|typeof|button|text|createEvent|appVersion|win|j22|_handlers|object|onWheel|Shockwave|Flash|features|start|implement|callee|j7|m360Obj|getStorage|SPAN|j26|_cleanup|class|command|_event_prefix_|default|_unbind|msie|styleFloat|abs|j10|element|M360_AC_Generateobj|CCCCCC|max|toAbs|defaults|type|append|css|j21|opera|defaultView|Event|item|j13|has|HTMLElement|M360_AC_GetArgs|embeds|glow|Microsoft|j19|wmode|visible|swfUrl|GetVariable|auto|https|load|getAttribute|remove|j42|removeChild|removeImg|kill|_event_add_|onabort|caller|Function|click|documentElement|replaceChild|sOpacity|_event_del_|getBaseUrl|string|loaderURL|j43|J_EXTENDED|WIN|uuid|presto|M360_DoFSCommand|naturalWidth|complete|webtv|margin|query|raiseEvent|relatedTarget|addEventListener|safari|embed|compareDocumentPosition|444553540000|UUID|clearEvents|dispatchEvent|none|clsid|420|which|pause|do|getBoundingClientRect|_src|j8|wrap||cancelBubble|preventDefault|M360_AC_AddExtension|error|isReady|now|j41|byTag|stopPropagation|abort|calc|doc|_bind|classid|toArray|sendMouseUp|webkit419|j33|baseurl|getMouseOver|DXImageTransform|date|dashize|Top|Bottom|getComputedStyle|j2|getMouseUp|getMouseDown|j3|Left|platform|pluginspage|forEach|mousedown|img_id|rel|float|com|Right|MagicImage|html|flVer|wheelDelta|pop|always|mouseout|MSIE|Opera|localStorage|xpath|XMLHttpRequest|setTimeout|chrome|getMouseOut|backcompat|getVer|textnode|nativize|RegExp|getFlashMovieObject||mouseover|j6Prop|magicJS|M360_AC_FL_RunContent|000||codebase|mtImg|enabled|m360ObjCont|Alpha|String|index|href|str|charAt|center|SCRIPT|overflow|concat|zoom|Date|shockwave|args|blur|flash|200|shadow|setProps|toFloat|260|250|trimLeft|211|210|postMessage|toUpperCase|525|initEvent|j20|random|220|applicationCache|trimRight|other|unknown|push|orientation|ipod|match|floor|mozInnerScreenY|taintEnabled|querySelector|runtime|getBoxObjectFor|air|collection|interval|backCompat|MouseEvent||regexp|setInterval|evaluate|mac|map|linux|exists|j23|j4|progid|hasChild|j30|enclose|insertBefore|childNodes|icompare|j31|iframe|zIndex|number|cssFloat|j30s|hasLayout|DOMElement|filters|innerText|innerHTML|offsetWidth|offsetHeight|j11|getTime|hide|slice|show|clientTop|clientLeft|j9|update|offsetParent|offsetTop|setAttribute|offsetLeft|presto925|innerWidth|getRelated|fromElement|181|srcElement|target|clientY|getTarget|toElement|190|191|192|detachEvent|attachEvent|getButton|removeEventListener|pageY|createEventObject|pageYOffset|j12|scrollWidth|pageXOffset|clientHeight|innerHeight|clientWidth|scrollHeight|Width|pageX|clientX|j15|returnValue|getPropertyValue|byClass|419|accesskey|high|www|adobe|go|quality|FlashVars|cabs|swflash|cab|getflashplayer|allowScriptAccess|lt|swliveConnect|encodeURIComponent|salign|allowFullScreen|base|scale|noscale|pub|macromedia|script|js|srcMode|opaque|fff|direction|status|809848fe217bc4bda859716c6a44b8e6|substring|lastIndexOf|eventType|_p_img_id|download|_p_|_p_height|_p_big_images|_p_small_images|_p_width|moz|alpha|FSCommand|m360Swf|eval|_DoFSCommand|protocol|focus|url|no|repeat|AppleWebKit|Gecko|onmousewheel|Magic360_removeImg|mouseup|mousewheel|DOMMouseScroll|KHTML|OBJECT|EMBED|gif|cloneNode|description|AllowScriptAccess|Magic360|ftp|0x|Opacity|appName|Internet|throw|Invalid|longdesc|relative|inline|Magic360PlusContainer|disable|Magic|360|invocation|change|_|static|DOMContentLoaded|doScroll|ondrop|10000|naturalHeight|swf|param|ondragover|onfinish|onfocus|onmouseout|onkeypress|onkeydown|application|onmouseover|onhelp|onmousedown|onmouseup|d27cdb6e|ae6d|8075|onafterupdate|onbeforeupdate|11CF|3F9C|M360_AC_SW_RunContent|dcr|166B1BCA|96b8|onblur|ondragenter|ondragleave|11cf|ondragend|ondrag|oncellchange|onclick|ondblclick|onkeyup|onmousemove|spin|hover|autostart|mozilla|onlosecapture|vspace|hspace|title|smoothing|loaded|simulate|fireEvent|777777|time|fade|speed|circle|effect|align|tabindex|onrowsinserted|onstart|onscroll|onactivate|onrowexit|onrowenter|onpropertychange|onreadystatechange|onrowsdelete|onbeforedeactivate|onbeforeeditfocus|ondeactivate'.split('|'),0,{}))

window.m360Swf=function(o,s){
  var spans = o.parentNode.parentNode.getElementsByTagName('span');
  for(var i=0; i<spans.length; i++ ){
    spans[i].style.position = '';
  }
  o.innerHTML=s.replace(/500/g,'312').replace(/wmode[\S]{2}window[\S]{1}/,'wmode="transparent"');
};
//*/

$(function(){
  sw360.init();
  
  //setTimeout(function(){alert($('.precacheIMG').length)},5000);
})

sw360 = {
  init: function(){
    var _this = this;
    this.frame_loaded = 0;
    this.dat = $('.magic360plus');
    this.frame_length = parseInt(this.dat.attr('frames'));
    this.path = this.dat.attr('path');
    this.width = 310;
    this.step = parseInt(this.width/this.frame_length);
    this.magSize = 200;
    this.largeSize = 700;
    this.random = 1;//Math.random();
    
    this.con = $('<div style="height:'+this.width+'px; width:'+this.width+'px; overflow:hidden; border:1px solid #ccc;"></div>');
    this.mask = $('<div style="height:'+this.width+'px; width:'+this.width+'px; overflow:hidden; position:absolute; cursor:default; background:#fff; margin:1px; "></div>');
    this.loadingBar = $('<div>Loading 360 Image 0%</div>')
    
    this.dat.parent().append(this.con);
    this.mask.css('opacity',1).insertBefore(this.con);
    this.mask.append(this.loadingBar);
    
    this.mag = $('<div style="width:'+this.magSize+'px; height:'+this.magSize+'px; display:none; position:absolute; border-radius: '+this.magSize/2+'px; -moz-border-radius: '+this.magSize/2+'px; -webkit-box-shadow:0px 0px 10px #333; -moz-box-shadow: 0px 0px 10px #333; box-shadow: 0px 0px 10px #333; "></div>')
    $('body').append(this.mag);
    
    this.precacheCon = $('<div style="width:1px; height:1px; overflow:hidden;"></div>');
    $('body').append(this.precacheCon);
    
    this.precache_loaded = 0;
    
    this.frames = [];
    this.precacheForLarge = []
    for (i=1; i<=this.frame_length; i++){
      this.frames[i] = $('<img class="precacheIMG" src="/images/'+this.path+'/small/'+this.getnum(i)+'.jpg?'+this.random+'" />').load(function(){_this.frameloaded()})
      this.precacheForLarge[i] = $('<img class="precacheIMG" src="/images/'+this.path+'/big/'+this.getnum(i)+'.jpg?'+this.random+'" />').load(function(){_this.frameloaded()})
      this.con.append(this.frames[i]);
      this.precacheCon.append(this.precacheForLarge[i]);
    }
    
    
    
    
    this.dat.remove();
    this.init_frame = 1;
  },
  getnum: function(n){
    return n.toString().length==1 ? '0'+n : n
  },
  precacheloaded: function(){
    
  },
  frameloaded: function(){
    var _this = this;
    this.frame_loaded += 1;
    this.freeze = 0;
    this.loadingBar.html( 'Loading 360 Image '+parseInt((parseFloat(this.frame_loaded)/parseFloat(this.frame_length*2))*100)+'%' );
    if(this.frame_loaded == this.frame_length*2){
      
      this.loadingBar.fadeOut(500, function(){_this.frames[1].show(); _this.mask.css('opacity',0)});
      
      this.mag.mousedown(function(event){
        //event.stopPropagation();
        $(this).hide(); 
        _this.freeze = 0;
      })
      
      this.mask.click(function(event){
        //event.stopPropagation();
        _this.freeze = 1;
        
        var OL = _this.con.offset().left;
        var AL = event.pageX;
        var offsetW = AL-OL;
        var propW = offsetW/_this.width;
        
        var OT = _this.con.offset().top;
        var AT = event.pageY;
        var offsetH = AT-OT;
        var propH = offsetH/_this.width;
        
        
        _this.mag.css('left', event.pageX-(_this.magSize/2)).css('top', event.pageY-(_this.magSize/2));
        _this.mag.css('background', 'url(\'/images/'+_this.path+'/big/'+_this.getnum(_this.frame_length-_this.currentFrame)+'.jpg?'+_this.random+'\') '+(0-parseInt(_this.largeSize*propW)+(_this.magSize/2))+'px '+(0-parseInt(_this.largeSize*propH)+(_this.magSize/2))+'px #fff no-repeat');
        _this.mag.show();
        
        //$('#tracer').val('propW:'+parseInt(propW*100)+', propH:'+parseInt(propH*100));
        $('#tracer').val('currentFrame:'+_this.getnum(_this.frame_length-_this.currentFrame));
        
        _this.init_frame = _this.currentFrame;
        
      })
      
      $('body').mousemove(function(event){
        //event.stopPropagation();
        if(_this.freeze){
          _this.mag.css('left', event.pageX-(_this.magSize/2)).css('top', event.pageY-(_this.magSize/2));
          var OL = _this.con.offset().left;
          var AL = event.pageX;
          var offsetW = AL-OL;
          var propW = offsetW/_this.width;
          
          var OT = _this.con.offset().top;
          var AT = event.pageY;
          var offsetH = AT-OT;
          var propH = offsetH/_this.width;
          
          var RL = (0-parseInt(_this.largeSize*propW)+(_this.magSize/2));
          var RT = (0-parseInt(_this.largeSize*propH)+(_this.magSize/2));
          
          if(RT<=(0-_this.largeSize+(_this.magSize/2)) || RL<=(0-_this.largeSize+(_this.magSize/2)) || RT>=(_this.magSize/2) || RL>=(_this.magSize/2)){
            
            _this.mag.hide();
          }else{
            _this.mag.css('background', 'url(\'/images/'+_this.path+'/big/'+_this.getnum(_this.frame_length-_this.currentFrame)+'.jpg?'+_this.random+'\') '+RL+'px '+RT+'px #fff no-repeat');
            _this.mag.show();
          }
          
          
        }
      })
      
      this.mask.mousemove(function(event){
        //event.stopPropagation();
        if(_this.freeze){return}
        if(_this.start){
          
          var offset = event.pageX-_this.start;
          var offsetSteps = parseInt(offset/_this.step);

            
          if(_this.init_frame+offsetSteps>0){
            _this.currentFrame = (_this.init_frame+offsetSteps)%(_this.frame_length+1) == 0 ? 1 : (_this.init_frame+offsetSteps)%(_this.frame_length+1);
          }else{
            _this.currentFrame = (_this.frame_length + _this.init_frame + offsetSteps)==0 ? _this.frame_length : (_this.frame_length + _this.init_frame + offsetSteps)
          }
          
          $('#tracer').val('steps:'+offsetSteps+', initFrame:'+_this.init_frame+', currentFrame:'+_this.currentFrame);
          _this.con.prepend(_this.frames[_this.frame_length-_this.currentFrame])
        }else{
          _this.start = event.pageX;
        }
      }).mouseover(function(){
        if(_this.freeze){return}
        //$('#tracer').val('over');
        _this.start = event.pageX;
      }).mouseout(function(){
        if(_this.freeze){return}
        //$('#tracer').val('out');
        _this.start = 0;
        _this.init_frame = _this.currentFrame;
      })
    }
  },
  zoom: function(i){
    alert(i);
  }
}


